Bootstrap: docker
From: nvidia/cuda:12.9.0-cudnn-devel-ubuntu24.04

%files
    TDBP_gpu2 /opt/TDBP_gpu2

%post
    export DEBIAN_FRONTEND=NONINTERACTIVE
    apt update -y
    apt install -y libfftw3-single3 libgdal34t64 libgomp1 liblapacke git cmake \
        gcc
    cd /opt
    git clone --depth 1 --branch v12.9 https://github.com/NVIDIA/cuda-samples.git
    cd cuda-samples
    mkdir build && cd build
    cmake ..
    make


%environment
    export PATH="/opt/TDBP_gpu2/bin:/opt/TDBP_gpu2/scripts:$PATH"

%labels
  author Jenny Fothergill <jennyfothergill@boisestate.edu>
  github.com/bsurc/container git rev={{GIT_REV}}
