bootstrap: docker
from: mambaorg/micromamba:2-cuda12.4.1-ubuntu22.04

%post
    cd /opt
    git clone https://github.com/facebookresearch/sam3.git
    export CONDA_OVERRIDE_CUDA="12.4"
    micromamba install -qy -c nvidia -c conda-forge python=3.12 pytorch=2.7.0 \
        torchvision torchaudio pip
    micromamba clean --all --yes
    cd sam3
    pip install -e ".[notebooks]"


%labels
  author Jenny Fothergill <jennyfothergill@boisestate.edu>
  github.com/bsurc/container git rev={{GIT_REV}}
